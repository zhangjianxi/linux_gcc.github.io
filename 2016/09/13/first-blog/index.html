<!doctype html>



  


<html class="theme-next pisces use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.0.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="测试," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.0.1" />






<meta name="description" content="hadoop伪分布式配置hadoop-env.sh1export JAVA_HOME=/opt/modules/jdk1.7.0_67
yarn-env.shcore-site.xml12345678910111213141516&amp;lt;configuration&amp;gt;    &amp;lt;property&amp;gt;        &amp;lt;name&amp;gt;fs.defaultFS&amp;lt;/name&amp;gt">
<meta property="og:type" content="article">
<meta property="og:title" content="first blog">
<meta property="og:url" content="http://yoursite.com/2016/09/13/first-blog/index.html">
<meta property="og:site_name" content="路漫漫其修远兮">
<meta property="og:description" content="hadoop伪分布式配置hadoop-env.sh1export JAVA_HOME=/opt/modules/jdk1.7.0_67
yarn-env.shcore-site.xml12345678910111213141516&amp;lt;configuration&amp;gt;    &amp;lt;property&amp;gt;        &amp;lt;name&amp;gt;fs.defaultFS&amp;lt;/name&amp;gt">
<meta property="og:updated_time" content="2016-09-13T09:16:23.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="first blog">
<meta name="twitter:description" content="hadoop伪分布式配置hadoop-env.sh1export JAVA_HOME=/opt/modules/jdk1.7.0_67
yarn-env.shcore-site.xml12345678910111213141516&amp;lt;configuration&amp;gt;    &amp;lt;property&amp;gt;        &amp;lt;name&amp;gt;fs.defaultFS&amp;lt;/name&amp;gt">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"always"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>




  <link rel="canonical" href="http://yoursite.com/2016/09/13/first-blog/"/>

  <title> first blog | 路漫漫其修远兮 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">路漫漫其修远兮</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">走过太多弯路，有过太多贪心，始知专注</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-photos">
          <a href="/photos" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-question-circle"></i> <br />
            
            相�
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                first blog
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-09-13T17:00:05+08:00" content="2016-09-13">
              2016-09-13
            </time>
          </span>

          

          
            
          

          

          
          

          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="hadoop"><a href="#hadoop" class="headerlink" title="hadoop"></a>hadoop</h2><h3 id="伪分布式配置"><a href="#伪分布式配置" class="headerlink" title="伪分布式配置"></a>伪分布式配置</h3><h4 id="hadoop-env-sh"><a href="#hadoop-env-sh" class="headerlink" title="hadoop-env.sh"></a>hadoop-env.sh</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">export JAVA_HOME=/opt/modules/jdk1.7.0_67</div></pre></td></tr></table></figure>
<h4 id="yarn-env-sh"><a href="#yarn-env-sh" class="headerlink" title="yarn-env.sh"></a>yarn-env.sh</h4><h4 id="core-site-xml"><a href="#core-site-xml" class="headerlink" title="core-site.xml"></a>core-site.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;configuration&gt;</div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;fs.defaultFS&lt;/name&gt;</div><div class="line">        &lt;value&gt;hdfs://dev-bigdata.com:8020&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line"></div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;hadoop.tmp.dir&lt;/name&gt;</div><div class="line">        &lt;value&gt;/opt/modules/hadoop-2.5.0-cdh5.3.6/data/tmp&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line"></div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;hadoop.http.staticuser.user&lt;/name&gt;</div><div class="line">        &lt;value&gt;bigdata&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure>
<h4 id="hdfs-site-xml"><a href="#hdfs-site-xml" class="headerlink" title="hdfs-site.xml"></a>hdfs-site.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">&lt;configuration&gt;</div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;dfs.replication&lt;/name&gt;</div><div class="line">        &lt;value&gt;1&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line"></div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;dfs.permissions.enabled&lt;/name&gt;</div><div class="line">        &lt;value&gt;false&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line"></div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;dfs.namenode.secondary.http-address&lt;/name&gt;</div><div class="line">        &lt;value&gt;dev-bigdata.com:50090&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line"></div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;dfs.web.ugi&lt;/name&gt;</div><div class="line">        &lt;value&gt;zhangjianxi,supergroup&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure>
<h4 id="yarn-site-xml"><a href="#yarn-site-xml" class="headerlink" title="yarn-site.xml"></a>yarn-site.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">&lt;configuration&gt;</div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;yarn.nodemanager.aux-services&lt;/name&gt;</div><div class="line">        &lt;value&gt;mapreduce_shuffle&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line"></div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;yarn.resourcemanager.hostname&lt;/name&gt;</div><div class="line">        &lt;value&gt;dev-bigdata.com&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line"></div><div class="line">    &lt;!-- log aggregation --&gt;</div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;yarn.log-aggregation-enable&lt;/name&gt;</div><div class="line">        &lt;value&gt;true&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line"></div><div class="line">    &lt;!-- log save time(sec) --&gt;</div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;yarn.log-aggregation.retain-seconds&lt;/name&gt;</div><div class="line">        &lt;value&gt;3600&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure>
<h4 id="mapreduce-site-xml"><a href="#mapreduce-site-xml" class="headerlink" title="mapreduce-site.xml"></a>mapreduce-site.xml</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;configuration&gt;</div><div class="line">    &lt;property&gt;</div><div class="line">        &lt;name&gt;mapreduce.framework.name&lt;/name&gt;</div><div class="line">        &lt;value&gt;yarn&lt;/value&gt;</div><div class="line">    &lt;/property&gt;</div><div class="line">&lt;/configuration&gt;</div></pre></td></tr></table></figure>
<h3 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h3><ul>
<li>ssh免密码登录<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">[bigdata@dev-bigdata ~]$ ssh-keygen -t rsa</div><div class="line">Generating public/private rsa key pair.</div><div class="line">Enter file in which to save the key (/home/bigdata/.ssh/id_rsa): </div><div class="line">/home/bigdata/.ssh/id_rsa already exists.</div><div class="line">Overwrite (y/n)? y</div><div class="line">Enter passphrase (empty for no passphrase): </div><div class="line">Enter same passphrase again: </div><div class="line">Your identification has been saved in /home/bigdata/.ssh/id_rsa.</div><div class="line">Your public key has been saved in /home/bigdata/.ssh/id_rsa.pub.</div><div class="line">The key fingerprint is:</div><div class="line">29:5c:73:1b:7a:30:19:44:38:1c:4d:18:1f:9a:7e:60 bigdata@dev-bigdata.com</div><div class="line">The key&apos;s randomart image is:</div><div class="line">+--[ RSA 2048]----+</div><div class="line">|     .oX*        |</div><div class="line">|      =+.+       |</div><div class="line">|      E.B o      |</div><div class="line">|     + o B o     |</div><div class="line">|      + S o      |</div><div class="line">|       o .       |</div><div class="line">|                 |</div><div class="line">|                 |</div><div class="line">|                 |</div><div class="line">+-----------------+</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">[bigdata@dev-bigdata ~]$ ssh-copy-id bigdata@dev-bigdata.com</div><div class="line">bigdata@dev-bigdata.com&apos;s password: </div><div class="line">Now try logging into the machine, with &quot;ssh &apos;bigdata@dev-bigdata.com&apos;&quot;, and check in:</div><div class="line"></div><div class="line">  .ssh/authorized_keys</div><div class="line"></div><div class="line">to make sure we haven&apos;t added extra keys that you weren&apos;t expecting.</div></pre></td></tr></table></figure>
<ul>
<li><p>hdfs格式化</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hdfs namenode -format</div></pre></td></tr></table></figure>
</li>
<li><p>启动hdfs</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[bigdata@dev-bigdata ~]$ start-dfs.sh</div><div class="line">16/08/02 08:50:40 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</div><div class="line">Starting namenodes on [dev-bigdata.com]</div><div class="line">dev-bigdata.com: starting namenode, logging to /opt/modules/hadoop-2.5.0-cdh5.3.6/logs/hadoop-bigdata-namenode-dev-bigdata.com.out</div><div class="line">The authenticity of host &apos;localhost (::1)&apos; can&apos;t be established.</div><div class="line">RSA key fingerprint is ec:39:8c:29:fd:78:ee:78:78:e3:27:de:3d:bd:18:5f.</div><div class="line">Are you sure you want to continue connecting (yes/no)? yes</div><div class="line">localhost: Warning: Permanently added &apos;localhost&apos; (RSA) to the list of known hosts.</div><div class="line">localhost: starting datanode, logging to /opt/modules/hadoop-2.5.0-cdh5.3.6/logs/hadoop-bigdata-datanode-dev-bigdata.com.out</div><div class="line">Starting secondary namenodes [dev-bigdata.com]</div><div class="line">dev-bigdata.com: starting secondarynamenode, logging to /opt/modules/hadoop-2.5.0-cdh5.3.6/logs/hadoop-bigdata-secondarynamenode-dev-bigdata.com.out</div><div class="line">16/08/02 08:51:06 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</div><div class="line">[bigdata@dev-bigdata ~]$ jps</div><div class="line">30389 DataNode</div><div class="line">30534 SecondaryNameNode</div><div class="line">30275 NameNode</div><div class="line">30639 Jps</div></pre></td></tr></table></figure>
</li>
<li><p>启动yarn</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">[bigdata@dev-bigdata ~]$ start-yarn.sh </div><div class="line">starting yarn daemons</div><div class="line">starting resourcemanager, logging to /opt/modules/hadoop-2.5.0-cdh5.3.6/logs/yarn-bigdata-resourcemanager-dev-bigdata.com.out</div><div class="line">localhost: starting nodemanager, logging to /opt/modules/hadoop-2.5.0-cdh5.3.6/logs/yarn-bigdata-nodemanager-dev-bigdata.com.out</div><div class="line">[bigdata@dev-bigdata ~]$ jps</div><div class="line">30389 DataNode</div><div class="line">30689 ResourceManager</div><div class="line">30534 SecondaryNameNode</div><div class="line">30275 NameNode</div><div class="line">30812 Jps</div><div class="line">30778 NodeManager</div></pre></td></tr></table></figure>
</li>
<li><p>启动historyserver</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">[bigdata@dev-bigdata ~]$ mr-jobhistory-daemon.sh start historyserver</div><div class="line">starting historyserver, logging to /opt/modules/hadoop-2.5.0-cdh5.3.6/logs/mapred-bigdata-historyserver-dev-bigdata.com.out</div><div class="line">[bigdata@dev-bigdata ~]$ jps</div><div class="line">31248 JobHistoryServer</div><div class="line">30389 DataNode</div><div class="line">30689 ResourceManager</div><div class="line">30534 SecondaryNameNode</div><div class="line">30275 NameNode</div><div class="line">30778 NodeManager</div><div class="line">31320 Jps</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><ul>
<li><p>hdfs基本操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">[bigdata@dev-bigdata ~]$ hdfs dfs -mkdir -p /user/bigdata/wc/input</div><div class="line">16/08/02 08:56:41 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</div><div class="line">[bigdata@dev-bigdata ~]$ hdfs dfs -ls /user/bigdata</div><div class="line">16/08/02 08:57:38 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</div><div class="line">Found 1 items</div><div class="line">drwxr-xr-x   - bigdata supergroup          0 2016-08-02 08:56 /user/bigdata/wc</div><div class="line">[bigdata@dev-bigdata ~]$ hdfs dfs -put /opt/datas/wc.input /user/bigdata/wc/input/</div><div class="line">16/08/02 08:59:06 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</div><div class="line">[bigdata@dev-bigdata ~]$ hdfs dfs -ls /user/bigdata/wc/input/</div><div class="line">16/08/02 08:59:22 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</div><div class="line">Found 1 items</div><div class="line">-rw-r--r--   1 bigdata supergroup         72 2016-08-02 08:59 /user/bigdata/wc/input/wc.input</div></pre></td></tr></table></figure>
</li>
<li><p>mapreduce任务执行</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div></pre></td><td class="code"><pre><div class="line">[bigdata@dev-bigdata ~]$ yarn jar /opt/modules/hadoop-2.5.0-cdh5.3.6/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.5.0-cdh5.3.6.jar wordcount /user/bigdata/wc/input /user/bigdata/wc/output</div><div class="line">16/08/02 09:01:15 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</div><div class="line">16/08/02 09:01:16 INFO client.RMProxy: Connecting to ResourceManager at dev-bigdata.com/192.168.136.130:8032</div><div class="line">16/08/02 09:01:17 INFO input.FileInputFormat: Total input paths to process : 1</div><div class="line">16/08/02 09:01:17 INFO mapreduce.JobSubmitter: number of splits:1</div><div class="line">16/08/02 09:01:18 INFO mapreduce.JobSubmitter: Submitting tokens for job: job_1470153114481_0001</div><div class="line">16/08/02 09:01:19 INFO impl.YarnClientImpl: Submitted application application_1470153114481_0001</div><div class="line">16/08/02 09:01:19 INFO mapreduce.Job: The url to track the job: http://dev-bigdata.com:8088/proxy/application_1470153114481_0001/</div><div class="line">16/08/02 09:01:19 INFO mapreduce.Job: Running job: job_1470153114481_0001</div><div class="line">16/08/02 09:01:35 INFO mapreduce.Job: Job job_1470153114481_0001 running in uber mode : false</div><div class="line">16/08/02 09:01:35 INFO mapreduce.Job:  map 0% reduce 0%</div><div class="line">16/08/02 09:01:52 INFO mapreduce.Job:  map 100% reduce 0%</div><div class="line">16/08/02 09:02:08 INFO mapreduce.Job:  map 100% reduce 100%</div><div class="line">16/08/02 09:02:08 INFO mapreduce.Job: Job job_1470153114481_0001 completed successfully</div><div class="line">16/08/02 09:02:08 INFO mapreduce.Job: Counters: 49</div><div class="line">    File System Counters</div><div class="line">        FILE: Number of bytes read=106</div><div class="line">        FILE: Number of bytes written=208667</div><div class="line">        FILE: Number of read operations=0</div><div class="line">        FILE: Number of large read operations=0</div><div class="line">        FILE: Number of write operations=0</div><div class="line">        HDFS: Number of bytes read=195</div><div class="line">        HDFS: Number of bytes written=60</div><div class="line">        HDFS: Number of read operations=6</div><div class="line">        HDFS: Number of large read operations=0</div><div class="line">        HDFS: Number of write operations=2</div><div class="line">    Job Counters </div><div class="line">        Launched map tasks=1</div><div class="line">        Launched reduce tasks=1</div><div class="line">        Data-local map tasks=1</div><div class="line">        Total time spent by all maps in occupied slots (ms)=15411</div><div class="line">        Total time spent by all reduces in occupied slots (ms)=12305</div><div class="line">        Total time spent by all map tasks (ms)=15411</div><div class="line">        Total time spent by all reduce tasks (ms)=12305</div><div class="line">        Total vcore-seconds taken by all map tasks=15411</div><div class="line">        Total vcore-seconds taken by all reduce tasks=12305</div><div class="line">        Total megabyte-seconds taken by all map tasks=15780864</div><div class="line">        Total megabyte-seconds taken by all reduce tasks=12600320</div><div class="line">    Map-Reduce Framework</div><div class="line">        Map input records=6</div><div class="line">        Map output records=18</div><div class="line">        Map output bytes=144</div><div class="line">        Map output materialized bytes=106</div><div class="line">        Input split bytes=123</div><div class="line">        Combine input records=18</div><div class="line">        Combine output records=10</div><div class="line">        Reduce input groups=10</div><div class="line">        Reduce shuffle bytes=106</div><div class="line">        Reduce input records=10</div><div class="line">        Reduce output records=10</div><div class="line">        Spilled Records=20</div><div class="line">        Shuffled Maps =1</div><div class="line">        Failed Shuffles=0</div><div class="line">        Merged Map outputs=1</div><div class="line">        GC time elapsed (ms)=210</div><div class="line">        CPU time spent (ms)=1940</div><div class="line">        Physical memory (bytes) snapshot=291778560</div><div class="line">        Virtual memory (bytes) snapshot=1680355328</div><div class="line">        Total committed heap usage (bytes)=136450048</div><div class="line">    Shuffle Errors</div><div class="line">        BAD_ID=0</div><div class="line">        CONNECTION=0</div><div class="line">        IO_ERROR=0</div><div class="line">        WRONG_LENGTH=0</div><div class="line">        WRONG_MAP=0</div><div class="line">        WRONG_REDUCE=0</div><div class="line">    File Input Format Counters </div><div class="line">        Bytes Read=72</div><div class="line">    File Output Format Counters </div><div class="line">        Bytes Written=60</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>将mapreduce.job.ubertask.enable设置为true。可以使mapreduce启动小作业模式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">[bigdata@dev-bigdata ~]$ hdfs dfs -ls /user/bigdata/wc/output</div><div class="line">16/08/02 09:03:48 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</div><div class="line">Found 2 items</div><div class="line">-rw-r--r--   1 bigdata supergroup          0 2016-08-02 09:02 /user/bigdata/wc/output/_SUCCESS</div><div class="line">-rw-r--r--   1 bigdata supergroup         60 2016-08-02 09:02 /user/bigdata/wc/output/part-r-00000</div><div class="line">[bigdata@dev-bigdata ~]$ hdfs dfs -text /user/bigdata/wc/output/part-r-00000</div><div class="line">16/08/02 09:04:13 WARN util.NativeCodeLoader: Unable to load native-hadoop library for your platform... using builtin-java classes where applicable</div><div class="line">aaa 3</div><div class="line">bbb 2</div><div class="line">ccc 2</div><div class="line">ddd 1</div><div class="line">eee 1</div><div class="line">fff 2</div><div class="line">ttt 2</div><div class="line">xxx 1</div><div class="line">yyy 2</div><div class="line">zzz 2</div></pre></td></tr></table></figure></p>
</blockquote>
<h2 id="Hive"><a href="#Hive" class="headerlink" title="Hive"></a>Hive</h2><h3 id="使用默认数据库配置"><a href="#使用默认数据库配置" class="headerlink" title="使用默认数据库配置"></a>使用默认数据库配置</h3><h4 id="hive-site-xml"><a href="#hive-site-xml" class="headerlink" title="hive-site.xml"></a>hive-site.xml</h4><blockquote>
<p>来源：hive-default.xml.template<br>2784行需要添加：<br><code>&lt;property&gt;</code></p>
<h4 id="hive-env-sh"><a href="#hive-env-sh" class="headerlink" title="hive-env.sh"></a>hive-env.sh</h4><p>来源：hive-env.sh.template</p>
<h4 id="hive-exec-log4j-properties"><a href="#hive-exec-log4j-properties" class="headerlink" title="hive-exec-log4j.properties"></a>hive-exec-log4j.properties</h4><p>来源：hive-exec-log4j.properties.template</p>
<h4 id="hive-log4j-properties"><a href="#hive-log4j-properties" class="headerlink" title="hive-log4j.properties"></a>hive-log4j.properties</h4><p>来源：hive-log4j.properties.template</p>
<h3 id="使用mysql数据库配置"><a href="#使用mysql数据库配置" class="headerlink" title="使用mysql数据库配置"></a>使用mysql数据库配置</h3><h4 id="数据库配置，使用mysql5-6"><a href="#数据库配置，使用mysql5-6" class="headerlink" title="数据库配置，使用mysql5.6"></a>数据库配置，使用mysql5.6</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[bigdata@dev-bigdata softwares]$ sudo rpm -Uvh mysql57-community-release-el6-8.noarch.rpm </div><div class="line">warning: mysql57-community-release-el6-8.noarch.rpm: Header V3 DSA/SHA1 Signature, key ID 5072e1f5: NOKEY</div><div class="line">Preparing...                ########################################### [100%]</div><div class="line">   1:mysql57-community-relea########################################### [100%]</div></pre></td></tr></table></figure>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;/etc/yum.repos.d/mysql-community-source.repo&lt;</div><div class="line">[mysql56-community-source]</div><div class="line">name=MySQL 5.6 Community Server - Source</div><div class="line">baseurl=http://repo.mysql.com/yum/mysql-5.6-community/el/6/SRPMS</div><div class="line">enabled=1</div><div class="line">gpgcheck=1</div><div class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&gt;/etc/yum.repos.d/mysql-community.repo&lt;</div><div class="line"># Enable to use MySQL 5.6 </div><div class="line">[mysql56-community]</div><div class="line">name=MySQL 5.6 Community Server</div><div class="line">baseurl=http://repo.mysql.com/yum/mysql-5.6-community/el/6/$basearch/</div><div class="line">enabled=1</div><div class="line">gpgcheck=1</div><div class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</div><div class="line"></div><div class="line">[mysql57-community]</div><div class="line">name=MySQL 5.7 Community Server</div><div class="line">baseurl=http://repo.mysql.com/yum/mysql-5.7-community/el/6/$basearch/</div><div class="line">enabled=0</div><div class="line">gpgcheck=1</div><div class="line">gpgkey=file:///etc/pki/rpm-gpg/RPM-GPG-KEY-mysql</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">[bigdata@dev-bigdata softwares]$ sudo yum -y install mysql-community-server</div><div class="line">Loaded plugins: fastestmirror, refresh-packagekit, security</div><div class="line">Loading mirror speeds from cached hostfile</div><div class="line"> * base: ftp.sjtu.edu.cn</div><div class="line"> * extras: ftp.sjtu.edu.cn</div><div class="line"> * updates: centos.ustc.edu.cn</div><div class="line">........</div><div class="line">...</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div></pre></td><td class="code"><pre><div class="line">[root@dev-bigdata ~]# mysql_secure_installation </div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MySQL</div><div class="line">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</div><div class="line"></div><div class="line">In order to log into MySQL to secure it, we&apos;ll need the current</div><div class="line">password for the root user.  If you&apos;ve just installed MySQL, and</div><div class="line">you haven&apos;t set the root password yet, the password will be blank,</div><div class="line">so you should just press enter here.</div><div class="line"></div><div class="line">Enter current password for root (enter for none): </div><div class="line">OK, successfully used password, moving on...</div><div class="line"></div><div class="line">Setting the root password ensures that nobody can log into the MySQL</div><div class="line">root user without the proper authorisation.</div><div class="line"></div><div class="line">Set root password? [Y/n] Y</div><div class="line">New password: </div><div class="line">Re-enter new password: </div><div class="line">Password updated successfully!</div><div class="line">Reloading privilege tables..</div><div class="line"> ... Success!</div><div class="line"></div><div class="line"></div><div class="line">By default, a MySQL installation has an anonymous user, allowing anyone</div><div class="line">to log into MySQL without having to have a user account created for</div><div class="line">them.  This is intended only for testing, and to make the installation</div><div class="line">go a bit smoother.  You should remove them before moving into a</div><div class="line">production environment.</div><div class="line"></div><div class="line">Remove anonymous users? [Y/n] Y</div><div class="line"> ... Success!</div><div class="line"></div><div class="line">Normally, root should only be allowed to connect from &apos;localhost&apos;.  This</div><div class="line">ensures that someone cannot guess at the root password from the network.</div><div class="line"></div><div class="line">Disallow root login remotely? [Y/n] n</div><div class="line"> ... skipping.</div><div class="line"></div><div class="line">By default, MySQL comes with a database named &apos;test&apos; that anyone can</div><div class="line">access.  This is also intended only for testing, and should be removed</div><div class="line">before moving into a production environment.</div><div class="line"></div><div class="line">Remove test database and access to it? [Y/n] Y</div><div class="line"> - Dropping test database...</div><div class="line">ERROR 1008 (HY000) at line 1: Can&apos;t drop database &apos;test&apos;; database doesn&apos;t exist</div><div class="line"> ... Failed!  Not critical, keep moving...</div><div class="line"> - Removing privileges on test database...</div><div class="line"> ... Success!</div><div class="line"></div><div class="line">Reloading the privilege tables will ensure that all changes made so far</div><div class="line">will take effect immediately.</div><div class="line"></div><div class="line">Reload privilege tables now? [Y/n] y</div><div class="line"> ... Success!</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">All done!  If you&apos;ve completed all of the above steps, your MySQL</div><div class="line">installation should now be secure.</div><div class="line"></div><div class="line">Thanks for using MySQL!</div><div class="line"></div><div class="line"></div><div class="line">Cleaning up...</div></pre></td></tr></table></figure>
<h4 id="本地数据库作为metastore模式："><a href="#本地数据库作为metastore模式：" class="headerlink" title="本地数据库作为metastore模式："></a>本地数据库作为metastore模式：</h4><h5 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h5><ul>
<li>hive-site.xml<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">  &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</div><div class="line">  &lt;value&gt;jdbc:mysql://localhost:3306/local_db?createDatabaseIfNotExist=true&lt;/value&gt;</div><div class="line">  &lt;description&gt;JDBC connect string for a JDBC metastore&lt;/description&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">  &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</div><div class="line">  &lt;value&gt;root&lt;/value&gt;</div><div class="line">  &lt;description&gt;username to use against metastore database&lt;/description&gt;</div><div class="line">&lt;/property&gt;</div><div class="line"></div><div class="line">&lt;property&gt;</div><div class="line">  &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</div><div class="line">  &lt;value&gt;123456&lt;/value&gt;</div><div class="line">  &lt;description&gt;password to use against metastore database&lt;/description&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure>
<h4 id="远程数据库作为metastore模式"><a href="#远程数据库作为metastore模式" class="headerlink" title="远程数据库作为metastore模式"></a>远程数据库作为metastore模式</h4><h5 id="配置-1"><a href="#配置-1" class="headerlink" title="配置"></a>配置</h5><ul>
<li>hive-site.xml<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">  &lt;name&gt;hive.metastore.uris&lt;/name&gt;</div><div class="line">  &lt;value&gt;thrift://dev-bigdata.com:9083&lt;/value&gt;</div><div class="line">  &lt;description&gt;Thrift URI for the remote metastore. Used by metastore client to connect to remote metastore.&lt;/description&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">  &lt;name&gt;javax.jdo.option.ConnectionURL&lt;/name&gt;</div><div class="line">  &lt;value&gt;jdbc:mysql://dev-bigdata.com:3306/local_db?createDatabaseIfNotExist=true&lt;/value&gt;</div><div class="line">  &lt;description&gt;JDBC connect string for a JDBC metastore&lt;/description&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">  &lt;name&gt;javax.jdo.option.ConnectionUserName&lt;/name&gt;</div><div class="line">  &lt;value&gt;root&lt;/value&gt;</div><div class="line">  &lt;description&gt;username to use against metastore database&lt;/description&gt;</div><div class="line">&lt;/property&gt;</div><div class="line"></div><div class="line">&lt;property&gt;</div><div class="line">  &lt;name&gt;javax.jdo.option.ConnectionPassword&lt;/name&gt;</div><div class="line">  &lt;value&gt;123456&lt;/value&gt;</div><div class="line">  &lt;description&gt;password to use against metastore database&lt;/description&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure>
<h5 id="启动-1"><a href="#启动-1" class="headerlink" title="启动"></a>启动</h5><ul>
<li>启动metastore服务<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[bigdata@dev-bigdata conf]$ nohup hive --service metastore &gt; /opt/modules/hive-0.13.1-cdh5.3.6/hive_metastore.log 2&gt;&amp;1 &amp;</div><div class="line">[1] 8477</div><div class="line">[bigdata@dev-bigdata conf]$ ps -ef | grep hive</div><div class="line">bigdata   8477  7354 81 09:04 pts/1    00:00:04 /opt/modules/jdk1.7.0_67/bin/java -Xmx256m -Djava.net.preferIPv4Stack=true -Dhadoop.log.dir=/opt/modules/hadoop-2.5.0-cdh5.3.6/logs -Dhadoop.log.file=hadoop.log -Dhadoop.home.dir=/opt/modules/hadoop-2.5.0-cdh5.3.6 -Dhadoop.id.str=bigdata -Dhadoop.root.logger=INFO,console -Djava.library.path=/opt/modules/hadoop-2.5.0-cdh5.3.6/lib/native -Dhadoop.policy.file=hadoop-policy.xml -Djava.net.preferIPv4Stack=true -Xmx512m -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.util.RunJar /opt/modules/hive-0.13.1-cdh5.3.6/lib/hive-service-0.13.1-cdh5.3.6.jar org.apache.hadoop.hive.metastore.HiveMetaStore</div><div class="line">bigdata   8540  7354  0 09:04 pts/1    00:00:00 grep hive</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="HiveServer2使用"><a href="#HiveServer2使用" class="headerlink" title="HiveServer2使用"></a>HiveServer2使用</h4><h5 id="配置-2"><a href="#配置-2" class="headerlink" title="配置"></a>配置</h5><ul>
<li>hive-site.xml<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">  &lt;name&gt;hive.server2.thrift.port&lt;/name&gt;</div><div class="line">  &lt;value&gt;10000&lt;/value&gt;</div><div class="line">  &lt;description&gt;Port number of HiveServer2 Thrift interface.</div><div class="line">  Can be overridden by setting $HIVE_SERVER2_THRIFT_PORT&lt;/description&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">  &lt;name&gt;hive.server2.thrift.bind.host&lt;/name&gt;</div><div class="line">  &lt;value&gt;dev-bigdata.com&lt;/value&gt;</div><div class="line">  &lt;description&gt;Bind host on which to run the HiveServer2 Thrift interface.</div><div class="line">  Can be overridden by setting $HIVE_SERVER2_THRIFT_BIND_HOST&lt;/description&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&lt;property&gt;</div><div class="line">  &lt;name&gt;hive.server2.long.polling.timeout&lt;/name&gt;</div><div class="line">  &lt;value&gt;5000&lt;/value&gt;</div><div class="line">  &lt;description&gt;Time in milliseconds that HiveServer2 will wait, before responding to asynchronous calls that use long polling&lt;/description&gt;</div><div class="line">&lt;/property&gt;</div></pre></td></tr></table></figure>
<h5 id="启动-2"><a href="#启动-2" class="headerlink" title="启动"></a>启动</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[bigdata@dev-bigdata hive-0.13.1-cdh5.3.6]$ nohup hiveserver2 &gt; /opt/modules/hive-0.13.1-cdh5.3.6/hiveserver2.log 2&gt;&amp;1 &amp;</div><div class="line">[bigdata@dev-bigdata hive-0.13.1-cdh5.3.6]$ ps -ef | grep HiveServer</div><div class="line">bigdata   8857  7354 38 09:14 pts/1    00:00:06 /opt/modules/jdk1.7.0_67/bin/java -Xmx256m -Djava.net.preferIPv4Stack=true -Dhadoop.log.dir=/opt/modules/hadoop-2.5.0-cdh5.3.6/logs -Dhadoop.log.file=hadoop.log -Dhadoop.home.dir=/opt/modules/hadoop-2.5.0-cdh5.3.6 -Dhadoop.id.str=bigdata -Dhadoop.root.logger=INFO,console -Djava.library.path=/opt/modules/hadoop-2.5.0-cdh5.3.6/lib/native -Dhadoop.policy.file=hadoop-policy.xml -Djava.net.preferIPv4Stack=true -Xmx512m -Dhadoop.security.logger=INFO,NullAppender org.apache.hadoop.util.RunJar /opt/modules/hive-0.13.1-cdh5.3.6/lib/hive-service-0.13.1-cdh5.3.6.jar org.apache.hive.service.server.HiveServer2</div><div class="line">bigdata   8941  7354  0 09:14 pts/1    00:00:00 grep HiveServer</div></pre></td></tr></table></figure>
<h5 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h5><ul>
<li><p>命令行模式调用</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">[bigdata@dev-bigdata ~]$ beeline </div><div class="line">Beeline version 0.13.1-cdh5.3.6 by Apache Hive</div><div class="line">beeline&gt; !connect jdbc:hive2://dev-bigdata.com:10000 bigdata bigdata</div><div class="line">scan complete in 11ms</div><div class="line">Connecting to jdbc:hive2://dev-bigdata.com:10000</div><div class="line">Connected to: Apache Hive (version 0.13.1-cdh5.3.6)</div><div class="line">Driver: Hive JDBC (version 0.13.1-cdh5.3.6)</div><div class="line">Transaction isolation: TRANSACTION_REPEATABLE_READ</div><div class="line">0: jdbc:hive2://dev-bigdata.com:10000&gt; show databases; </div><div class="line">+----------------+--+</div><div class="line">| database_name  |</div><div class="line">+----------------+--+</div><div class="line">| db_mysql       |</div><div class="line">| default        |</div><div class="line">+----------------+--+</div><div class="line">2 rows selected (0.529 seconds)</div><div class="line">0: jdbc:hive2://dev-bigdata.com:10000&gt; use db_mysql;    </div><div class="line">No rows affected (0.082 seconds)</div><div class="line">0: jdbc:hive2://dev-bigdata.com:10000&gt; show tables;</div><div class="line">+-----------+--+</div><div class="line">| tab_name  |</div><div class="line">+-----------+--+</div><div class="line">| tb_mysql  |</div><div class="line">+-----------+--+</div><div class="line">1 row selected (0.168 seconds)</div><div class="line">0: jdbc:hive2://dev-bigdata.com:10000&gt; select * from tb_mysql;</div><div class="line">+----------------+--+</div><div class="line">| tb_mysql.line  |</div><div class="line">+----------------+--+</div><div class="line">+----------------+--+</div><div class="line">No rows selected (1.483 seconds)</div></pre></td></tr></table></figure>
</li>
<li><p>java程序使用jdbc调用配置<br>pom.xml</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;org.apache.hive&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;hive-jdbc&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;0.13.1&lt;/version&gt;</div><div class="line"> &lt;/dependency&gt;</div><div class="line"> &lt;dependency&gt;</div><div class="line">    &lt;groupId&gt;org.apache.hadoop&lt;/groupId&gt;</div><div class="line">    &lt;artifactId&gt;hadoop-client&lt;/artifactId&gt;</div><div class="line">    &lt;version&gt;2.5.0&lt;/version&gt;</div><div class="line">&lt;/dependency&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="实例操作"><a href="#实例操作" class="headerlink" title="实例操作"></a>实例操作</h3><ul>
<li>简单数据导入<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">//查看表结构</div><div class="line">hive&gt; describe formatted tb_my;</div><div class="line">OK</div><div class="line"># col_name              data_type               comment             </div><div class="line">         </div><div class="line">name                    string                                      </div><div class="line">         </div><div class="line"># Detailed Table Information         </div><div class="line">Database:               db_my                    </div><div class="line">Owner:                  hadoop                   </div><div class="line">CreateTime:             Fri Jul 29 16:43:44 CST 2016     </div><div class="line">LastAccessTime:         UNKNOWN                  </div><div class="line">Protect Mode:           None                     </div><div class="line">Retention:              0                        </div><div class="line">Location:               hdfs://dev-hadoop-remote.com:8020/user/hive/warehouse/db_my.db/tb_my     </div><div class="line">Table Type:             MANAGED_TABLE            </div><div class="line">Table Parameters:        </div><div class="line">    COLUMN_STATS_ACCURATE   true                </div><div class="line">    numFiles                1                   </div><div class="line">    numRows                 0                   </div><div class="line">    rawDataSize             0                   </div><div class="line">    totalSize               48                  </div><div class="line">    transient_lastDdlTime   1469782096          </div><div class="line">         </div><div class="line"># Storage Information        </div><div class="line">SerDe Library:          org.apache.hadoop.hive.serde2.lazy.LazySimpleSerDe   </div><div class="line">InputFormat:            org.apache.hadoop.mapred.TextInputFormat     </div><div class="line">OutputFormat:           org.apache.hadoop.hive.ql.io.HiveIgnoreKeyTextOutputFormat   </div><div class="line">Compressed:             No                       </div><div class="line">Num Buckets:            -1                       </div><div class="line">Bucket Columns:         []                       </div><div class="line">Sort Columns:           []                       </div><div class="line">Storage Desc Params:         </div><div class="line">    serialization.format    1                   </div><div class="line">Time taken: 0.12 seconds, Fetched: 31 row(s)</div></pre></td></tr></table></figure>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">//导入数据</div><div class="line">hive&gt; load data local inpath &apos;/opt/datas/tb_my&apos; overwrite into table tb_my;</div><div class="line">Loading data to table db_my.tb_my</div><div class="line">Table db_my.tb_my stats: [numFiles=1, numRows=0, totalSize=24, rawDataSize=0]</div><div class="line">OK</div><div class="line">Time taken: 2.448 seconds</div><div class="line">hive&gt; select * from tb_my;</div><div class="line">OK</div><div class="line">aaa</div><div class="line">bbb</div><div class="line">ccc</div><div class="line">ddd</div><div class="line">eee</div><div class="line">fff</div><div class="line">Time taken: 0.398 seconds, Fetched: 6 row(s)</div></pre></td></tr></table></figure>
<h2 id="sqoop"><a href="#sqoop" class="headerlink" title="sqoop"></a>sqoop</h2><h3 id="配置-3"><a href="#配置-3" class="headerlink" title="配置"></a>配置</h3><h4 id="sqoop-env-sh"><a href="#sqoop-env-sh" class="headerlink" title="sqoop-env.sh"></a>sqoop-env.sh</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[hadoop@dev-hadoop-single conf]$ cp sqoop-env-template.sh sqoop-env.sh</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">#Set path to where bin/hadoop is available</div><div class="line">export HADOOP_COMMON_HOME=/opt/modules/hadoop-2.5.0-cdh5.3.6</div><div class="line"></div><div class="line">#Set path to where hadoop-*-core.jar is available</div><div class="line">export HADOOP_MAPRED_HOME=/opt/modules/hadoop-2.5.0-cdh5.3.6</div><div class="line"></div><div class="line">#set the path to where bin/hbase is available</div><div class="line">#export HBASE_HOME=</div><div class="line"></div><div class="line">#Set the path to where bin/hive is available</div><div class="line">export HIVE_HOME=/opt/modules/hive-0.13.1-cdh5.3.6</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[hadoop@dev-hadoop-single ~]$ cp /opt/software/mysql-connector-java-5.1.26-bin.jar /opt/modules/sqoop-1.4.5-cdh5.3.6/lib/</div></pre></td></tr></table></figure>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/测试/" rel="tag">#测试</a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/09/13/hello-world/" rel="next" title="Hello World">
                <i class="fa fa-chevron-left"></i> Hello World
              </a>
            
          </div>

          <div class="post-nav-prev post-nav-item">
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/uploads/headimg.jpg"
               alt="Storm Zhang" />
          <p class="site-author-name" itemprop="name">Storm Zhang</p>
          <p class="site-description motion-element" itemprop="description">专注</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">2</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">1</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

      </section>

      
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">
            
              
            
            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#hadoop"><span class="nav-number">1.</span> <span class="nav-text">hadoop</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#伪分布式配置"><span class="nav-number">1.1.</span> <span class="nav-text">伪分布式配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#hadoop-env-sh"><span class="nav-number">1.1.1.</span> <span class="nav-text">hadoop-env.sh</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#yarn-env-sh"><span class="nav-number">1.1.2.</span> <span class="nav-text">yarn-env.sh</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#core-site-xml"><span class="nav-number">1.1.3.</span> <span class="nav-text">core-site.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hdfs-site-xml"><span class="nav-number">1.1.4.</span> <span class="nav-text">hdfs-site.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#yarn-site-xml"><span class="nav-number">1.1.5.</span> <span class="nav-text">yarn-site.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#mapreduce-site-xml"><span class="nav-number">1.1.6.</span> <span class="nav-text">mapreduce-site.xml</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#启动"><span class="nav-number">1.2.</span> <span class="nav-text">启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#测试"><span class="nav-number">1.3.</span> <span class="nav-text">测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hive"><span class="nav-number">2.</span> <span class="nav-text">Hive</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#使用默认数据库配置"><span class="nav-number">2.1.</span> <span class="nav-text">使用默认数据库配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#hive-site-xml"><span class="nav-number">2.1.1.</span> <span class="nav-text">hive-site.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hive-env-sh"><span class="nav-number">2.1.2.</span> <span class="nav-text">hive-env.sh</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hive-exec-log4j-properties"><span class="nav-number">2.1.3.</span> <span class="nav-text">hive-exec-log4j.properties</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#hive-log4j-properties"><span class="nav-number">2.1.4.</span> <span class="nav-text">hive-log4j.properties</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#使用mysql数据库配置"><span class="nav-number">2.2.</span> <span class="nav-text">使用mysql数据库配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#数据库配置，使用mysql5-6"><span class="nav-number">2.2.1.</span> <span class="nav-text">数据库配置，使用mysql5.6</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#本地数据库作为metastore模式："><span class="nav-number">2.2.2.</span> <span class="nav-text">本地数据库作为metastore模式：</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#配置"><span class="nav-number">2.2.2.1.</span> <span class="nav-text">配置</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#远程数据库作为metastore模式"><span class="nav-number">2.2.3.</span> <span class="nav-text">远程数据库作为metastore模式</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#配置-1"><span class="nav-number">2.2.3.1.</span> <span class="nav-text">配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#启动-1"><span class="nav-number">2.2.3.2.</span> <span class="nav-text">启动</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HiveServer2使用"><span class="nav-number">2.2.4.</span> <span class="nav-text">HiveServer2使用</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#配置-2"><span class="nav-number">2.2.4.1.</span> <span class="nav-text">配置</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#启动-2"><span class="nav-number">2.2.4.2.</span> <span class="nav-text">启动</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#使用"><span class="nav-number">2.2.4.3.</span> <span class="nav-text">使用</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#实例操作"><span class="nav-number">2.3.</span> <span class="nav-text">实例操作</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sqoop"><span class="nav-number">3.</span> <span class="nav-text">sqoop</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#配置-3"><span class="nav-number">3.1.</span> <span class="nav-text">配置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#sqoop-env-sh"><span class="nav-number">3.1.1.</span> <span class="nav-text">sqoop-env.sh</span></a></li></ol></li></ol></li></ol></div>
            
          </div>
        </section>
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Storm Zhang</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>

        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.0.1"></script>



  



  




  
  

  

  

  

</body>
</html>
